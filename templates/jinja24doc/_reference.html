{% set prev = 'none' %}
{% for type, name, args, doc in api %}
  {% if type != 'submodule' and prev == 'submodule' %}
      </div><!-- submodules --!>
  {% endif%}
  {% if type == 'module' %}
    <h2 class="{{ type }}"><i>module</i> {{ name }}
      <span class="links"> 
        <a name="{{ name }}" href="#{{ name }}">link</a> |
        <a href="#">top</a></span></h2>
  {% elif type == 'submodule' %}
    {% if prev != type %}
    <div class="submodules">
      <small>Module dependences:</small>
    {% else %},
    {% endif %}
      <span class="{{ type }}">{{ wiki(name) }}</span>
  {% elif type == 'function' and name[0] != '_' %}
    <h3 class="{{ type }}"><i>def</i> {{ name }}{{ args }}
      <span class="links">
        <a name="{{ name }}" href="#{{ name }}">link</a> | 
        <a href="#">top</a></span></h3>
    <div class="{{ type }}">{{ wiki(doc) }}</div>
  {% endif %}
  {% set prev = type %}
{% endfor %}
